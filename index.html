<!DOCTYPE html>
<html lang="hi">
<head>
 <meta name="google-site-verification" content="LsUI2LEMxc_eabjh08errtpzwAJlC51ywqHOn6exSn8" />
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bakery POS Final</title>

<style>
body{font-family:Arial;background:#f4f4f4;margin:0}
header{background:#e69a00;color:#fff;text-align:center;padding:15px}
.products{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:10px;padding:10px}
.card{background:#fff;padding:12px;border-radius:10px}
button{background:#e69a00;color:#fff;border:none;padding:7px;border-radius:8px;width:100%;margin-top:5px}
.cart,.admin{background:#fff;margin:10px;padding:12px;border-radius:10px}
input,select{width:100%;padding:6px;margin-top:5px}
.small{font-size:12px;color:#555}
</style>
</head>

<body>

<header>
<h2>ğŸ Bakery POS System</h2>
<p>Auto KG | Stock | Report | WhatsApp</p>
</header>

<button onclick="openAdmin()">ğŸ” Admin</button>

<div class="products" id="productList"></div>

<div class="cart">
<h3>ğŸ›’ Cart</h3>
<div id="cartItems">Empty</div>
<h3 id="total">Total â‚¹0</h3>
<button onclick="sendBill()">ğŸ“² WhatsApp Bill</button>
<button onclick="printPDF()">ğŸ–¨ï¸ PDF</button>
</div>

<div class="admin" id="adminBox" style="display:none">
<h3>â• Add Product</h3>
<input id="aname" placeholder="Product name">
<input id="aprice" type="number" placeholder="Price">
<select id="aunit">
<option value="KG">KG</option>
<option value="Packet">Packet</option>
<option value="Piece">Piece</option>
</select>
<input id="astock" type="number" placeholder="Stock">
 <input id="aimg" type="file" accept="image/*">
<button onclick="addProduct()">Save</button>

<hr>
<h3>ğŸ“Š Reports</h3>
<button onclick="viewDaily()">Daily View</button>
<button onclick="sendDaily()">Daily WhatsApp</button>

<button onclick="viewWeekly()">Weekly View</button>
<button onclick="sendWeekly()">Wee
 
 kly WhatsApp</button>

<button onclick="viewMonthly()">Monthly View</button>
<button onclick="sendMonthly()">Monthly WhatsApp</button>

<div id="reportBox"></div>

<hr>
<h3>ğŸ“¦ Stock</h3>
<div id="stockList"></div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
const ADMIN_PASS="1234";

let products=[
{name:"Bread",price:40,unit:"Piece",stock:100},
{name:"Pav",price:5,unit:"Piece",stock:200},
{name:"Cake Slice",price:30,unit:"Piece",stock:80},
{name:"Pastry",price:40,unit:"Piece",stock:60},
{name:"Cookies",price:200,unit:"KG",stock:20},
{name:"Namkeen",price:160,unit:"KG",stock:25},
{name:"Rusk",price:90,unit:"Packet",stock:40},
{name:"Toast",price:70,unit:"Packet",stock:30}
];

let cart=[];
let sales=[];

/* LOAD PRODUCTS */
function loadProducts(){
let h="";
products.forEach((p,i)=>{
h+=`<div class="card">
<b>${p.name}</b><br>
â‚¹${p.price}/${p.unit}
<div class="small">Stock: ${p.stock}</div>
<input id="v${i}" type="number" placeholder="${p.unit=="KG"?"â‚¹ amount":"Quantity"}">
<button onclick="addCart(${i})">Add</button>
</div>`;
});
productList.innerHTML=h;
}

/* ADD CART */
function addCart(i){
let p=products[i];
let v=+document.getElementById("v"+i).value;
if(!v||v<=0)return alert("Value à¤¡à¤¾à¤²à¥‹");

let used,price,qty;
if(p.unit=="KG"){
used=v/p.price;
if(used>p.stock)return alert("Stock à¤¨à¤¹à¥€à¤‚");
qty=(used*1000).toFixed(0)+" gm";
price=v;
}else{
used=v;
if(used>p.stock)return alert("Stock à¤¨à¤¹à¥€à¤‚");
qty=v+" "+p.unit;
price=v*p.price;
}

p.stock-=used;
cart.push({name:p.name,qty,price,idx:i,used});
sales.push({name:p.name,qty,price,date:new Date()});
loadProducts();updateCart();loadStock();
}

/* CART */
function updateCart(){
let h="",t=0;
cart.forEach((c,i)=>{
t+=c.price;
h+=`${c.name} (${c.qty}) â‚¹${c.price}
<button onclick="removeItem(${i})">âŒ</button><br>`;
});
cartItems.innerHTML=h||"Empty";
total.innerText="Total â‚¹"+t;
}

function removeItem(i){
let c=cart[i];
products[c.idx].stock+=c.used;
cart.splice(i,1);
loadProducts();updateCart();loadStock();
}

/* ADMIN */
function openAdmin(){
let p=prompt("Password");
if(p==ADMIN_PASS){adminBox.style.display="block";loadStock();}
else alert("Wrong Password");
}

function addProduct(){
products.push({name:aname.value,price:+aprice.value,unit:aunit.value,stock:+astock.value});
aname.value=aprice.value=astock.value="";
loadProducts();loadStock();
}

function loadStock(){
let h="";
products.forEach((p,i)=>{
h+=`${p.name} â‚¹${p.price}/${p.unit} | Stock ${p.stock}
<button onclick="del(${i})">Delete</button><br>`;
});
stockList.innerHTML=h;
}
function del(i){products.splice(i,1);loadProducts();loadStock();}

/* REPORT HELPERS */
function isSameDay(d){
let n=new Date();
return d.toDateString()==n.toDateString();
}
function getWeek(d){
let onejan=new Date(d.getFullYear(),0,1);
return Math.ceil((((d-onejan)/86400000)+onejan.getDay()+1)/7);
}

/* DAILY */
function viewDaily(){showReport(sales.filter(s=>isSameDay(s.date)),"ğŸ“Š Daily Report");}
function sendDaily(){sendReport(sales.filter(s=>isSameDay(s.date)),"ğŸ“Š Daily Report");}

/* WEEKLY */
function viewWeekly(){
let w=getWeek(new Date());
showReport(sales.filter(s=>getWeek(s.date)==w),"ğŸ“… Weekly Report");
}
function sendWeekly(){
let w=getWeek(new Date());
sendReport(sales.filter(s=>getWeek(s.date)==w),"ğŸ“… Weekly Report");
}

/* MONTHLY */
function viewMonthly(){
let m=new Date().getMonth(),y=new Date().getFullYear();
showReport(sales.filter(s=>s.date.getMonth()==m&&s.date.getFullYear()==y),"ğŸ—“ï¸ Monthly Report");
}
function sendMonthly(){
let m=new Date().getMonth(),y=new Date().getFullYear();
sendReport(sales.filter(s=>s.date.getMonth()==m&&s.date.getFullYear()==y),"ğŸ—“ï¸ Monthly Report");
}

/* REPORT CORE */
function showReport(arr,title){
let h=`<h4>${title}</h4>`,t=0;
if(arr.length==0){reportBox.innerHTML="No Sale";return;}
arr.forEach(s=>{t+=s.price;h+=`${s.name} (${s.qty}) â‚¹${s.price}<br>`;});
h+=`<b>Total â‚¹${t}</b>`;
reportBox.innerHTML=h;
}
function sendReport(arr,title){
let m=title+"\n\n",t=0;
arr.forEach(s=>{t+=s.price;m+=`${s.name} (${s.qty}) â‚¹${s.price}\n`;});
m+="\nTotal â‚¹"+t;
window.open("https://wa.me/917647071356?text="+encodeURIComponent(m));
}

/* BILL */
function sendBill(){
let m="ğŸ§¾ Bakery Bill\n",t=0;
cart.forEach(c=>{t+=c.price;m+=`${c.name} ${c.qty} â‚¹${c.price}\n`;});
m+="Total â‚¹"+t;
window.open("https://wa.me/917647071356?text="+encodeURIComponent(m));
}
function printPDF(){
const {jsPDF}=window.jspdf;
let pdf=new jsPDF(),y=20,t=0;
pdf.text("Bakery Bill",10,10);
cart.forEach(c=>{t+=c.price;pdf.text(`${c.name} ${c.qty} â‚¹${c.price}`,10,y);y+=8;});
pdf.text("Total â‚¹"+t,10,y+10);
pdf.save("bill.pdf");
}

loadProducts();
</script>
<!-- WhatsApp Floating Button -->
<a href="https://wa.me/917647071356?text=Hello%20Rashmi%20Bakery%2C%20I%20want%20to%20order"
   target="_blank"
   style="
   position:fixed;
   bottom:20px;
   right:20px;
   background:#25D366;
   color:white;
   padding:12px 16px;
   border-radius:50px;
   font-size:16px;
   text-decoration:none;
   box-shadow:0 2px 6px rgba(0,0,0,0.3);
   z-index:9999;">
   ğŸŸ¢ Order on WhatsApp
 </a>
</body>
 </html>
